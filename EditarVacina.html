<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/editarVacinaStyle.css">
    <title>MyHealth - Editar Vacina</title>
    <link rel="shortcut icon" href="assets/imgs/icon-vaccine.png" type="image/x-icon">

    <script>
        const url = window.location.search

        const urlParams = new URLSearchParams(url)

        const id = urlParams.get('idVacina')

        const vacinas = JSON.parse(sessionStorage.getItem("listaVacinas"))

        console.log(vacinas)
    </script>
</head>

<body>
    <section>
        <header>
            <nav class="menu">
                <div class="menu-esquerda">
                    <div class="logo">
                        <img src="assets/imgs/icon-vaccine.png" alt="logo">
                    </div>
                    <h2 class="app-name">MyHealth</h2>
                </div>
                <div class="menu-direita">
                    <ul>
                        <li class="menu-item">
                            <a class="item" href="Home.html">Minhas vacinas</a>
                        </li>
                        <li class="menu-item">
                            <a class="item" href="Index.html">Logout</a>
                        </li>
                    </ul>
                </div>
            </nav>

        </header>
        <main>
            <section class="container">
                <button class="btn-excluir" onclick="excluirVacinaModal('alert-modal')"><img src="assets/imgs/lixeira.svg" alt=""> Excluir</button>

                <div>
                    <form>
                        <div class="container-forms">
                            <div class="forms-rotulos">
                                <label class="rotulo" for="data_vacina">Data de Vacinação</label>
                                <label class="rotulo" for="nome">Vacina</label>
                                <label class="rotulo" for="dose">Dose</label>
                                <label class="rotulo" for="comprovante">Comprovante de Vacina</label>
                                <div class="espaco-img"></div>
                                <label class="rotulo" for="proxima_vacina">Próxima Vacinação</label>
                            </div>
                            <div class="forms-entradas">
                                <input class="entrada" type="date" name="data_vacina" id="data_vacina" placeholder="11/08/2022">
                                <input class="entrada" type="text" name="nome" id="nome" placeholder="Hepatite B">
                                <div class="container-radio">
                                    <input class="entrada-radio" type="radio" name="1dose" id="1dose">
                                    <label class="rotulo-radio" for="1dose">1a. dose</label>
                                    <input class="entrada-radio" type="radio" name="2dose" id="2dose">
                                    <label class="rotulo-radio" for="1dose">2a. dose</label>
                                    <input class="entrada-radio" type="radio" name="3dose" id="3dose">
                                    <label class="rotulo-radio" for="1dose">3a. dose</label>
                                    <input class="entrada-radio" type="radio" name="reforco" id="reforco">
                                    <label class="rotulo-radio" for="1dose">Reforço</label>
                                    <input class="entrada-radio" type="radio" name="unica" id="unica">
                                    <label class="rotulo-radio" for="1dose">Dose Única</label>
                                </div>
                                <label class="add-img" for="add-image">Selecionar imagem...</label>
                                <input class="entrada" type="file" name="image" id="add-image" onload="readImage()">
                                <div class="img-nova-vacina">
                                    <img id="imgComprovante" src="" alt="" height="146px">
                                </div>
                                <input class="entrada" type="date" name="" id="" placeholder="11/08/2022">
                            </div>
                        </div>
                    </form>
                </div>
                <button class="btn-alterar" onclick="editarVacina()">Salvar alterações</button>
            </section>

        </main>
    </section>

    <section class="alert-container" id="alert-modal">
        <div class="alert">
            <div class="alert-mensage">
                <h3>Tem certeza que deseja remover essa vacina?</h3>
            </div>
            <div class="alert-options">
                <button class="btn-alert confirm" onclick="excluirVacina()">Sim</button>
                <button class="btn-alert cancel" onclick="fecharModal('alert-modal')">Cancelar</button>
            </div>
        </div>
    </section>

    <script>
        function excluirVacinaModal(alertID) {
            const modal = document.getElementById(alertID)
            modal.classList.add('visible')
        }

        function excluirVacina() {
            window.location.href = "./Home.html"
        }

        function fecharModal(alertID) {
            const modal = document.getElementById(alertID)
            modal.classList.remove('visible')
        }

        function editarVacina() {
            window.location.href = "./Home.html"
        }

        function readImage() {
            if (this.files && this.files[0]) {
                var file = new FileReader();
                file.onload = function(e) {
                    document.getElementById("imgComprovante").src = e.target.result;
                };
                file.readAsDataURL(this.files[0]);
            }
        }
        document.getElementById("add-image").addEventListener("change", readImage, false);

        window.onload = () => {
            const id = new URLSearchParams(window.location.search).get('id')
        }
    </script>
</body>

</html>